<div class="admin-volunteer-section">
    <div class="form-group row">
        <label for="search" class="col-2 col-form-label">Search</label>
        <div class="col-10">
            <input type="text" class="form-control" placeholder="Search" id="search" ng-model="$ctrl.query" ng-change="ctrl.filterChanged()"/>
        </div>
    </div>
    <div class="form-group row">
        <label for="status" class="col-2 col-form-label">Status</label>
        <div class="col-10">
            <select class="form-control" ng-model="ctrl.selected_status" ng-options="status for status in ctrl.statuses" ng-change="ctrl.filterChanged()" id="status">
            </select>
        </div>
    </div>
<!--
    <div class="form-group row">
        <label for="order_by" class="col-2 col-form-label">Order By</label>
        <div class="col-10">
            <select class="form-control" ng-model="ctrl.selected_order" ng-options="order for order in ctrl.orders" ng-change="ctrl.filterChanged()" id="order_by">
            </select>
        </div>
    </div>
-->
    <h3>Volunteers</h3>
    <table class="volunteer_table table" style="width:100%;">
        <tr>
            <td>Name</td>
            <td>Email</td>
            <td>Organization</td>
            <td>Role</td>
            <td>Status</td>
            <td>Date Added</td>
            <td>Classes</td>
            <td>Action</td>
        </tr>
        <tr class="volunteer_row" ng-repeat="vol in ctrl.volunteers | filter:{status:ctrl.selected_status}: true | filter:$ctrl.query">
<!--            Editable form-->
            <td ng-if="vol.saved || ctrl.selectedVolunteerEdit._id!=vol._id">{{vol.User.name}}</td>
            <td ng-if="!vol.saved && ctrl.selectedVolunteerEdit._id==vol._id">
                <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteerEdit.name">
            </td>
            <td ng-if="vol.saved || ctrl.selectedVolunteerEdit._id!=vol._id">{{vol.User.email}}</td>
            <td ng-if="!vol.saved && ctrl.selectedVolunteerEdit._id==vol._id">
                <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteerEdit.email">
            </td>
            <td ng-if="vol.saved || ctrl.selectedVolunteerEdit._id!=vol._id">{{vol.User.organization}}</td>
            <td ng-if="!vol.saved && ctrl.selectedVolunteerEdit._id==vol._id">
                <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteerEdit.organization">
            </td>
            <td ng-if="vol.saved || ctrl.selectedVolunteerEdit._id!=vol._id">{{vol.User.role}}</td>
            <td ng-if="!vol.saved && ctrl.selectedVolunteerEdit._id==vol._id">
                <select ng-blur="ctrl.updateVolunteer()" class="form-control" ng-model="ctrl.selectedVolunteerEdit.status" ng-options="status for status in ctrl.statuses"></select>
            </td>
<!--            End editable form-->
            
            <td>{{vol.status}}</td>
            <td>{{vol.createdAt | date}}</td>
            <td>
                <button ng-click="ctrl.showClasses(vol)" class="btn btn-primary">Show</button>
            </td>
            <td>
                <button ng-if="vol.saved || ctrl.selectedVolunteerEdit._id!=vol._id" class="btn btn-primary" ng-click="ctrl.select(vol,false)">Edit</button>
                <button ng-if="!vol.saved && ctrl.selectedVolunteerEdit._id==vol._id" class="btn btn-warning" ng-click="ctrl.select(vol,true)">Save</button>
            </td>
        </tr>
    </table>
    <div class="admin-volunteers-section">
        <div class="pane">
            <div ng-if="ctrl.volunteerclasses" class="edit-volunteer-section">
                <h3>{{ctrl.selectedVolunteer.User.name}}'s classes</h3>
                <table class="table">
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Location</th>
                        <th>Day</th>
                        <th>Time</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    <tr ng-repeat="course in ctrl.volunteerclasses">
                        <td>{{course.Class.name}}</td>
                        <td>{{course.Class.info}}</td>
                        <td>{{course.Class.location}}</td>
                        <td>{{course.Class.day}}</td>
                        <td>{{course.Class.startTime | date : format:shortTime}} - {{course.Class.startTime | date : format:shortTime}}</td>
                        <td>{{course.status}}</td>
                        <td ng-if="course.status == 'pending'">
                            <button ng-click="ctrl.approveCourse(course)" class="btn btn-primary">Approve</button>
                        </td>
                        <td ng-if="course.status == 'active'">
                            <button ng-click="ctrl.removeCourse(course)" class="btn btn-warning">Remove</button>
                        </td>
                    </tr>
                </table>
            </div>
<!--
            <div class="volunteers-section">
                <div class="volunteer_container">
-->
    <!--
                    <div class="test-class">
                        Name: <span class="class-name" ng-click="ctrl.selectedVolunteer = class"> {{vol.name}} </span><br>
                        Email: <span class="class-name" ng-click="ctrl.selectedVolunteer = class"> {{vol.email}} </span><br>
                        Role: <span class="class-name" ng-click="ctrl.selectedVolunteer = class"> {{vol.role}} </span><br>
                        Organization: <span class="class-name" ng-click="ctrl.selectedVolunteer = class"> {{vol.organization}} </span>
                        <span class="glyphicon glyphicon-remove" ng-click="ctrl.removeVolunteer(vol)"></span>
                    </div>
    -->
<!--
                </div>
            </div>
-->
<!--
            <div ng-if="ctrl.selectedVolunteer" class="edit-volunteer-section">
                <h3>Edit {{ctrl.selectedVolunteer.name}}</h3>
                <div class="form-group">
                    <label>Name</label>
                    <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteer.name"/>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteer.email"/>
                </div>

                <div class="form-group">
                    <label>Organization</label>
                    <input ng-blur="ctrl.updateVolunteer()" type="text" class="form-control" ng-model="ctrl.selectedVolunteer.organization"/>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select ng-blur="ctrl.updateVolunteer()" class="form-control" ng-model="ctrl.selectedVolunteer.status">
                        <option value="pending">Pending</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" ng-click="ctrl.updateVolunteer()">Save</button>
            </div>
-->
            
<!--
            <div ng-if="!ctrl.showAdd && ctrl.selectedVolunteer" class="edit-volunteer-section">
                <h3>Add {{ctrl.selectedVolunteer.name}} to a class</h3>
                <div class="form-group">
                    <label>Class</label>
                    <select ng-model="ctrl.classes" ng-options="class as class.name for class in ctrl.classes"></select>
                </div>
                <button class="btn btn-primary" ng-click="ctrl.addVolunteerToClass(class)">Add</button>
            </div>
-->
            
            
<!--
            <div ng-if="ctrl.selectedVolunteer">
                <form novalidate class="simple-form">
                    <div class="form-group">
                        <label>Add to class</label>
                        <select ng-model="ctrl.selected_class" ng-options="class as class.name for class in ctrl.classes track by class._id" class="form-control"></select>
                    </div>
                    <input type="submit" class="btn btn-primary" ng-click="ctrl.addVolunteerToClass()" value="Add to Class"/>
                </form>
            </div>
-->
<!--        
            <div class="btn btn-primary" ng-click="ctrl.showAdd = true" ng-hide="ctrl.showAdd" >Add</div>
            <div ng-show="ctrl.showAdd" class="new-volunteer-section">
                <h3>Add a new volunteer</h3>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" class="form-control" ng-model="ctrl.newVolunteer.name"/>
                </div>

                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" ng-model="ctrl.newVolunteer.email" required/>
                </div>
                <div class="form-group">
                    <label>Organization</label>
                    <input type="text" class="form-control" ng-model="ctrl.newVolunteer.organization" />
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" class="form-control" ng-model="ctrl.newVolunteer.password" required/>
                </div>
                <button class="btn btn-primary" ng-click="ctrl.addVolunteer()">Add</button>
            </div>
-->
        </div>
    </div>
</div>